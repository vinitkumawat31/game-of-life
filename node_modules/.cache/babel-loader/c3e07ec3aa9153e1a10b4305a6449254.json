{"ast":null,"code":"var _jsxFileName = \"C:\\\\welcome to hell\\\\work\\\\react\\\\game-of-life\\\\src\\\\grid.js\";\nimport React, { Component } from 'react'; //import './grid.css';\n\nimport Box from './box';\n\nclass Grid extends Component {\n  constructor(props, context) {\n    super(props, context);\n\n    this.selectBox = (i, j) => {\n      var gridArray = this.state.gridArray;\n      var active = this.state.active;\n\n      if (gridArray[i][j] === 0) {\n        gridArray[i][j] = 1;\n      } else {\n        gridArray[i][j] = 0;\n      }\n\n      if (active.has(i)) {\n        if (active.get(i).has(j)) {\n          active.get(i).delete(j);\n          if (active.get(i).size === 0) active.delete(i);\n        } else {\n          active.get(i).set(j, 1);\n        }\n      } else {\n        active.set(i, new Map());\n        active.get(i).set(j, 1);\n      }\n\n      this.setState({\n        gridArray: gridArray,\n        active: active\n      });\n    };\n\n    this.reset = () => {\n      this.setState({\n        generation: 0,\n        gridArray: Array(this.props.rows).fill().map(() => Array(this.props.cols).fill(0)),\n        active: new Map()\n      });\n    };\n\n    this.startEvolution = () => {\n      var gen = this.state.generation;\n      var active = this.state.active;\n      var rows = this.props.rows;\n      var cols = this.props.cols;\n      var nbr = new Map();\n      var gA = Array(rows).fill().map(() => Array(cols).fill(0)); //store neighbours of active cells\n\n      for (let i of active.keys()) {\n        var M = active.get(i);\n\n        for (let j of M.keys()) {\n          if (nbr.has(i)) {\n            if (!nbr.get(i).has(j)) {\n              nbr.get(i).set(j, 0);\n            }\n          } else {\n            nbr.set(i, new Map());\n            nbr.get(i).set(j, 0);\n          }\n\n          for (var x = -1; x <= 1; x++) {\n            for (var y = -1; y <= 1; y++) {\n              if (!(y === 0 && x === 0)) {\n                if (nbr.has(i + x)) {\n                  if (nbr.get(i + x).has(j + y)) {\n                    var n = nbr.get(i + x).get(j + y);\n                    nbr.get(i + x).set(j + y, n + 1);\n                  } else {\n                    nbr.get(i + x).set(j + y, 1);\n                  }\n                } else {\n                  nbr.set(i + x, new Map());\n                  nbr.get(i + x).set(j + y, 1);\n                }\n              }\n            }\n          }\n        }\n      } //add or remove from active according to survival rules\n\n\n      for (let i of nbr.keys()) {\n        var M = nbr.get(i);\n\n        for (let j of M.keys()) {\n          var n = M.get(j);\n          var alive = 0;\n\n          if (active.has(i)) {\n            if (active.get(i).has(j)) alive = 1;\n          }\n\n          if (alive === 1) {\n            if (n < 2 || n > 3) {\n              active.get(i).delete(j);\n              if (active.get(i).size === 0) active.delete(i);\n            }\n          } else {\n            if (n === 3) {\n              if (active.has(i)) {\n                active.get(i).set(j, 1);\n              } else {\n                active.set(i, new Map());\n                active.get(i).set(j, 1);\n              }\n            }\n          }\n        }\n      } //console.log(this.active);\n\n\n      for (let i of active.keys()) {\n        var M = active.get(i);\n\n        for (let j of M.keys()) {\n          if (i >= 0 && i < rows) {\n            if (j >= 0 && j < cols) {\n              gA[i][j] = 1;\n            }\n          }\n        }\n      }\n\n      gen++;\n      this.setState({\n        gridArray: gA,\n        generation: gen,\n        active: active\n      });\n    };\n\n    this.evolve = () => {\n      clearInterval(this.intervalId);\n      this.intervalId = setInterval(this.startEvolution, 200);\n    };\n\n    this.stop = () => {\n      clearInterval(this.intervalId);\n    };\n\n    this.state = {\n      generation: 0,\n      gridArray: Array(this.props.rows).fill().map(() => Array(this.props.cols).fill(0)),\n      active: new Map()\n    };\n    this.intervalId = 0; //this.active = new Map();\n  }\n\n  render() {\n    const width = this.props.cols * 17;\n    var box_array = [];\n\n    for (var i = 0; i < this.props.rows; i++) {\n      for (var j = 0; j < this.props.cols; j++) {\n        //var id = i+\"_\"+j;\n        if (this.state.gridArray[i][j] === 0) box_array.push( /*#__PURE__*/React.createElement(Box, {\n          boxClass: \"box off\",\n          x: i,\n          y: j,\n          selectBox: this.selectBox,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 23\n          }\n        }));else box_array.push( /*#__PURE__*/React.createElement(Box, {\n          boxClass: \"box on\",\n          x: i,\n          y: j,\n          selectBox: this.selectBox,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 23\n          }\n        }));\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        marginBottom: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.reset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 10\n      }\n    }, \"Reset\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-success\",\n      onClick: this.evolve,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 10\n      }\n    }, \"Start\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-danger\",\n      onClick: this.stop,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 10\n      }\n    }, \"Stop\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      style: {\n        margin: \"auto\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 35\n      }\n    }, \"Generation : \", this.state.generation)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 8\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"grid row\",\n      style: {\n        width: width,\n        margin: \"auto\",\n        lineHeight: 0\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 10\n      }\n    }, box_array))), /*#__PURE__*/React.createElement(\"hr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 8\n      }\n    }));\n  }\n\n}\n\nexport default Grid;\n/*startEvolution = () =>{\r\n \tvar gen = this.state.generation;\r\n \tvar rows = this.props.rows;\r\n \tvar cols = this.props.cols;\r\nvar gA = this.state.gridArray;\r\nvar nbr = Array(rows).fill().map(() => Array(cols).fill(0));\r\nfor(var i=0;i<rows;i++){\r\n\tfor( var j=0;j<cols;j++){\r\n\t\tfor(var x=-1;x<=1;x++){\r\n\t\t\tfor(var y=-1;y<=1;y++){\r\n\t\t\t\tif(!(y===0&&x===0)){\r\n\t\t\t\t\tif(gA[(i+x+rows)%rows][(j+y+cols)%cols] === 1)\r\n\t\t\t\t\t\tnbr[i][j]++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n   }\r\n   for(i=0;i<rows;i++){\r\n  \t\tfor(j=0;j<cols;j++){\r\n  \t\t\tif(gA[i][j] === 1){\r\n  \t\t\t\tif(nbr[i][j]<2)\r\n  \t\t\t\t\tgA[i][j] = 0;\r\n  \t\t\t\telse if(nbr[i][j]>3){\r\n  \t\t\t\t\tgA[i][j] = 0;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t\telse{\r\n  \t\t\t\tif(nbr[i][j] === 3)\r\n  \t\t\t\t\tgA[i][j] = 1;\r\n  \t\t\t}\r\n  \t\t}\r\n  \t}\r\n  \tgen++;\r\n  \tthis.setState({\r\n  \t\tgridArray: gA,\r\n  \t\tgeneration: gen\r\n  \t});\r\n }*/","map":{"version":3,"sources":["C:/welcome to hell/work/react/game-of-life/src/grid.js"],"names":["React","Component","Box","Grid","constructor","props","context","selectBox","i","j","gridArray","state","active","has","get","delete","size","set","Map","setState","reset","generation","Array","rows","fill","map","cols","startEvolution","gen","nbr","gA","keys","M","x","y","n","alive","evolve","clearInterval","intervalId","setInterval","stop","render","width","box_array","push","marginBottom","margin","lineHeight"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\n//import './grid.css';\r\nimport Box from './box';\r\nclass Grid extends Component{\r\n\r\n  constructor(props, context){\r\n  \tsuper(props, context);\r\n\r\n  \tthis.state = {\r\n  \t\tgeneration:0,\r\n  \t\tgridArray: Array(this.props.rows).fill().map(() => Array(this.props.cols).fill(0)),\r\n  \t\tactive: new Map()\r\n  \t}\r\n  \tthis.intervalId = 0;\r\n  \t//this.active = new Map();\r\n  }\r\n\r\n  selectBox = (i,j) => {\r\n  \tvar gridArray = this.state.gridArray;\r\n  \tvar active = this.state.active;\r\n  \tif(gridArray[i][j] === 0){\r\n  \t\tgridArray[i][j] = 1;\r\n  \t}\r\n  \telse{\r\n  \t\tgridArray[i][j] = 0;\r\n  \t}\r\n  \tif(active.has(i)){\r\n  \t\t\tif(active.get(i).has(j)){\r\n  \t\t\t\tactive.get(i).delete(j);\r\n\t  \t\t\tif(active.get(i).size === 0)\r\n\t  \t\t\t\tactive.delete(i);\r\n  \t\t\t}\r\n  \t\t\telse{\r\n  \t\t\t\tactive.get(i).set(j,1);\r\n  \t\t\t}\r\n  \t\t}\r\n\telse{\r\n\t\tactive.set(i,new Map());\r\n\t\tactive.get(i).set(j,1);\r\n\t}\r\n\r\n  \tthis.setState({\r\n  \t\tgridArray:gridArray,\r\n  \t\tactive:active\r\n  \t});\r\n  }\r\n\r\n  reset = () =>{\r\n  \tthis.setState({\r\n  \t\tgeneration:0,\r\n  \t\tgridArray:Array(this.props.rows).fill().map(() => Array(this.props.cols).fill(0)),\r\n  \t\tactive: new Map()\r\n  \t});\r\n  }\r\n\r\n  startEvolution = () =>{\r\n  \tvar gen = this.state.generation;\r\n  \tvar active = this.state.active;\r\n  \tvar rows = this.props.rows;\r\n  \tvar cols = this.props.cols;\r\n  \tvar nbr = new Map();\r\n  \tvar gA = Array(rows).fill().map(() => Array(cols).fill(0));\r\n  \t//store neighbours of active cells\r\n  \tfor (let i of active.keys()){\r\n  \t\tvar M = active.get(i);\r\n  \t\tfor(let j of M.keys()){\r\n  \t\t\tif(nbr.has(i)){\r\n\t\t\t\tif(!nbr.get(i).has(j)){\r\n\t\t\t\t\tnbr.get(i).set(j,0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tnbr.set(i,new Map());\r\n\t\t\t\tnbr.get(i).set(j,0);\r\n\t\t\t}\r\n  \t\t\tfor(var x=-1;x<=1;x++){\r\n\t\t\t\tfor(var y=-1;y<=1;y++){\r\n\t\t\t\t\tif(!(y===0&&x===0)){\r\n\t\t\t\t\t\tif(nbr.has(i+x)){\r\n\t\t\t\t\t\t\tif(nbr.get(i+x).has(j+y)){\r\n\t\t\t\t\t\t\t\tvar n = nbr.get(i+x).get(j+y);\r\n\t\t\t\t\t\t\t\tnbr.get(i+x).set(j+y,n+1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\tnbr.get(i+x).set(j+y,1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tnbr.set(i+x,new Map());\r\n\t\t\t\t\t\t\tnbr.get(i+x).set(j+y,1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n  \t\t}\r\n  \t}\r\n  \t//add or remove from active according to survival rules\r\n  \tfor (let i of nbr.keys()){\r\n  \t\tvar M = nbr.get(i);\r\n  \t\tfor(let j of M.keys()){\r\n  \t\t\tvar n = M.get(j);\r\n  \t\t\tvar alive = 0;\r\n  \t\t\tif(active.has(i)){\r\n  \t\t\t\tif (active.get(i).has(j))\r\n  \t\t\t\t\talive = 1;\r\n  \t\t\t}\r\n  \t\t\tif(alive === 1){\r\n   \t\t\t\tif(n<2 || n>3){\r\n   \t\t\t\t\tactive.get(i).delete(j);\r\n\t\t  \t\t\tif(active.get(i).size === 0)\r\n\t\t  \t\t\t\tactive.delete(i);\r\n   \t\t\t\t}\r\n   \t\t\t}\r\n   \t\t\telse{\r\n   \t\t\t\tif(n === 3){\r\n\t\t\t\t\tif(active.has(i)){\r\n\t\t\t  \t\t\tactive.get(i).set(j,1);\r\n\t\t\t  \t\t}\r\n\t\t\t  \t\telse{\r\n\t\t\t  \t\t\tactive.set(i,new Map());\r\n\t\t\t  \t\t\tactive.get(i).set(j,1);\r\n\t\t\t  \t\t}\r\n   \t\t\t\t}\r\n   \t\t\t}\r\n  \t\t}\r\n  \t}\r\n  \t//console.log(this.active);\r\n  \tfor (let i of active.keys()){\r\n  \t\tvar M = active.get(i);\r\n  \t\tfor(let j of M.keys()){\r\n  \t\t\tif(i>=0&&i<rows){\r\n  \t\t\t\tif(j>=0&&j<cols){\r\n  \t\t\t\t\tgA[i][j] = 1;\r\n  \t\t\t\t}\r\n  \t\t\t}\r\n  \t\t}\r\n  \t}\r\n  \tgen++;\r\n   \tthis.setState({\r\n   \t\tgridArray: gA,\r\n   \t\tgeneration: gen,\r\n   \t\tactive:active\r\n   \t});\r\n  }\r\n  evolve = () =>{\r\n  \tclearInterval(this.intervalId);\r\n  \tthis.intervalId = setInterval(this.startEvolution,200);\r\n  }\r\n\r\n  stop = ()=>{\r\n  \tclearInterval(this.intervalId);\r\n  }\r\n\r\n  render(){\r\n  \tconst width = this.props.cols*17;\r\n  \tvar box_array = [];\r\n\tfor(var i=0;i<this.props.rows;i++){\r\n   \t\tfor( var j=0;j<this.props.cols;j++){\r\n   \t\t\t//var id = i+\"_\"+j;\r\n   \t\t\tif(this.state.gridArray[i][j] === 0)\r\n   \t\t\t\tbox_array.push(<Box boxClass=\"box off\" x={i} y={j} selectBox={this.selectBox}/>);\r\n   \t\t\telse\r\n   \t\t\t\tbox_array.push(<Box boxClass=\"box on\" x={i} y={j} selectBox={this.selectBox}/>);\r\n   \t\t}\r\n       }\r\n    return (\r\n    \t<div>\r\n\t      <div className=\"row\" style={{marginBottom:10}}>\r\n\t\t      <div className=\"col-md-1\"></div>\r\n\t\t      <div className=\"col-md-2\">\r\n\t\t      \t<button type=\"button\" className=\"btn btn-primary\" onClick={this.reset}>Reset</button>\r\n\t\t      </div>\r\n\t\t      <div className=\"col-md-2\">\r\n\t\t      \t<button type=\"button\" className=\"btn btn-success\" onClick={this.evolve}>Start</button>\r\n\t\t      </div>\r\n\t\t      <div className=\"col-md-2\">\r\n\t\t      \t<button type=\"button\" className=\"btn btn-danger\" onClick={this.stop}>Stop</button>\r\n\t\t      </div>\r\n\t\t      <div className=\"col-md-3\"><h3 style={{margin:\"auto\" }}>Generation : {this.state.generation}</h3></div>\r\n\t\t   \t  <div className=\"col-md-2\"></div>\r\n\t\t   </div>\r\n\t      <div className=\"row\">\r\n\t      \t  <div className=\"col-md-12\" >\r\n\t\t\t      <div className=\"grid row\" style={{width:width,margin:\"auto\",lineHeight:0}}>\r\n\t\t\t     \t\t{box_array}\r\n\t\t\t      </div>\r\n\t\t      </div>\r\n\t      </div>\r\n\t      <hr/>\r\n      </div>\r\n    );\r\n  };\r\n}\r\n\r\nexport default Grid;\r\n\r\n\r\n /*startEvolution = () =>{\r\n  \tvar gen = this.state.generation;\r\n  \tvar rows = this.props.rows;\r\n  \tvar cols = this.props.cols;\r\n\tvar gA = this.state.gridArray;\r\n\tvar nbr = Array(rows).fill().map(() => Array(cols).fill(0));\r\n\tfor(var i=0;i<rows;i++){\r\n\t\tfor( var j=0;j<cols;j++){\r\n\t\t\tfor(var x=-1;x<=1;x++){\r\n\t\t\t\tfor(var y=-1;y<=1;y++){\r\n\t\t\t\t\tif(!(y===0&&x===0)){\r\n\t\t\t\t\t\tif(gA[(i+x+rows)%rows][(j+y+cols)%cols] === 1)\r\n\t\t\t\t\t\t\tnbr[i][j]++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n    for(i=0;i<rows;i++){\r\n   \t\tfor(j=0;j<cols;j++){\r\n   \t\t\tif(gA[i][j] === 1){\r\n   \t\t\t\tif(nbr[i][j]<2)\r\n   \t\t\t\t\tgA[i][j] = 0;\r\n   \t\t\t\telse if(nbr[i][j]>3){\r\n   \t\t\t\t\tgA[i][j] = 0;\r\n   \t\t\t\t}\r\n   \t\t\t}\r\n   \t\t\telse{\r\n   \t\t\t\tif(nbr[i][j] === 3)\r\n   \t\t\t\t\tgA[i][j] = 1;\r\n   \t\t\t}\r\n   \t\t}\r\n   \t}\r\n   \tgen++;\r\n   \tthis.setState({\r\n   \t\tgridArray: gA,\r\n   \t\tgeneration: gen\r\n   \t});\r\n  }*/"]},"metadata":{},"sourceType":"module"}